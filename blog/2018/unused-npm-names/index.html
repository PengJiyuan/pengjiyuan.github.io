<html>
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <meta name="description" content="æ€ä¹ˆæ ·å¯ä»¥çŸ¥é“ä¸€ä¸ªnpmåŒ…çš„åå­—æ˜¯å¦è¢«å ç”¨ï¼Ÿä¸ºäº†æ–¹ä¾¿ï¼Œæˆ‘ä»¬æ¥å†™ä¸€ä¸ªèƒ½å‘Šè¯‰ä½ npmåå­—æ˜¯å¦è¢«å ç”¨çš„å·¥å…·ã€‚" />
    <meta name="og:site_name" content="PengJiyuan's Blog" />
    <meta name="og:image" content="/static/images/common/avatar.png" />
    <meta name="og:url" content="http://isweety.me/blog/2018/unused-npm-names" />
    <meta name="og:title" content="æ€ä¹ˆæ ·å†™ä¸€ä¸ªèƒ½å‘Šè¯‰ä½ npmåŒ…åå­—æ˜¯å¦è¢«å ç”¨çš„å·¥å…·" />
    <meta name="og:description" content="æ€ä¹ˆæ ·å¯ä»¥çŸ¥é“ä¸€ä¸ªnpmåŒ…çš„åå­—æ˜¯å¦è¢«å ç”¨ï¼Ÿä¸ºäº†æ–¹ä¾¿ï¼Œæˆ‘ä»¬æ¥å†™ä¸€ä¸ªèƒ½å‘Šè¯‰ä½ npmåå­—æ˜¯å¦è¢«å ç”¨çš„å·¥å…·ã€‚" />
    <link href="/static/css/markdown.css" rel="stylesheet" />
    <link href="/static/css/highlight.css" rel="stylesheet" />
    <link rel="shortcut icon" href="/static/images/common/favicon.ico" type="image/x-icon" />
    <link href="/static/css/blog.css" rel="stylesheet" />
    <link href="/static/iconfonts/icons/icons.css" rel="stylesheet" />
    <title>æ€ä¹ˆæ ·å†™ä¸€ä¸ªèƒ½å‘Šè¯‰ä½ npmåŒ…åå­—æ˜¯å¦è¢«å ç”¨çš„å·¥å…·-JavaScript,NodeJs</title>
  </head>
  <body>
    <nav class="nav">
  <a href="/" class="avatar"><img src="/static/images/common/avatar.png" /></a>
  <div id="menu-btn" class="menu-btn"><i class="icon icon-category"></i>èœå•</div>
</nav>

<div class="nav-content">
  <h3>èœå•</h3>
  <i id="close-nav" class="icon icon-close"></i>
  <div class="menus">
    <a href="/">åšå®¢</a><a href="/opensource">æˆ‘çš„å¼€æº</a><a href="/tag">å½’æ¡£</a>
  </div>
  <h3>å…³æ³¨æˆ‘</h3>
  <div class="follow-me">
    <a href="https://github.com/PengJiyuan">Github</a><a href="https://twitter.com/MrjLEO">Twitter</a>
  </div>
</div>

<script>
  var menuBtn = document.getElementById('menu-btn');
  var closeNav = document.getElementById('close-nav');
  menuBtn.onclick = function() {
    document.body.classList.toggle('nav-open');
  };
  closeNav.onclick = function() {
    document.body.classList.toggle('nav-open');
  }
</script>

    <div class="site-wrapper">
      <header id="header" class="header">
        <div class="center">
          <h1 class="title">æ€ä¹ˆæ ·å†™ä¸€ä¸ªèƒ½å‘Šè¯‰ä½ npmåŒ…åå­—æ˜¯å¦è¢«å ç”¨çš„å·¥å…·</h1>
          <p class="author"><img src="/static/images/common/favicon.ico" />PengJiyuan | åŸåˆ›</p>
          <p class="intro">æ€ä¹ˆæ ·å¯ä»¥çŸ¥é“ä¸€ä¸ªnpmåŒ…çš„åå­—æ˜¯å¦è¢«å ç”¨ï¼Ÿä¸ºäº†æ–¹ä¾¿ï¼Œæˆ‘ä»¬æ¥å†™ä¸€ä¸ªèƒ½å‘Šè¯‰ä½ npmåå­—æ˜¯å¦è¢«å ç”¨çš„å·¥å…·ã€‚</p>
        </div>
      </header>
      <script>
        var header = document.getElementById('header');
        var themes = [
          'mooonlit', 'cool_blue', 'evening_sunshing', 'memariani', 'kye_meh',
          'by_design', 'red_sunset', 'pun_yeta', 'nepal', 'deep_space', 'curiosity_blue',
          'purple_bliss', 'miaka', 'sky'
        ];
        function random(min, max) {
          return Math.floor(Math.random() * (max - min + 1)) + min;
        }
        const theme = themes[random(0, themes.length - 1)];
        header.classList.add(theme);
      </script>
      <div class="markdown-body">
        
        <div class="copyright">
          æœ¬æ–‡ç”± <a href="/">PengJiyuan</a> åˆ›ä½œï¼Œé‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-nd/3.0/deed.zh">çŸ¥è¯†å…±äº«ç½²å 3.0 (CC BY-NC-ND 3.0)</a> å›½é™…è®¸å¯åè®®è¿›è¡Œè®¸å¯, è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼Œç¦æ­¢å•†ä¸šæ€§ä½¿ç”¨ï¼Œç¦æ­¢æ¼”ç»ã€‚
        </div>
        
        <blockquote>
<p>äº‹æƒ…æ˜¯è¿™æ ·çš„ï¼š</p>
<p>å› ä¸ºæˆ‘ç»å¸¸ä¼šå†™ä¸€äº›npmåŒ…ï¼Œä½†æ˜¯æœ‰æ—¶å€™æˆ‘å†™å®Œä¸€ä¸ªåŒ…ï¼Œ<code>npm publish</code> çš„æ—¶å€™å´è¢«æç¤ºè¯´åŒ…åå­—è¢«å ç”¨äº†ï¼Œè¦ä¸å°±æ”¹åå­—ï¼Œè¦ä¸å°±åŠ scopeï¼Œå¾ˆæ— å¥ˆã€‚
npm å‘½ä»¤è¡Œå¯ä»¥é€šè¿‡ <code>npm view</code> çš„æ–¹å¼å»å¾—çŸ¥ä¸€ä¸ªåŒ…æ˜¯å¦å­˜åœ¨ï¼Œä½†æ˜¯æ— æ³•æ‰¹é‡å¾—çŸ¥ï¼Œæ‰€ä»¥å°±æƒ³ç€å†™ä¸€ä¸ªå·¥å…·æ¥æ‰¹é‡é€‰å:)</p>
</blockquote>
<h2 id="npmæ–¹å¼">
      <a href="#npmæ–¹å¼" aria-hidden="true"><i class="icon icon-link"></i></a>
      NPMæ–¹å¼
    </h2>
<p>åœ¨å†™å·¥å…·ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆçœ‹çœ‹æ€ä¹ˆé€šè¿‡ npm æä¾›çš„å‘½ä»¤æ¥å¾—çŸ¥åŒ…åæ˜¯å¦è¢«å ç”¨ã€‚</p>
<p><code>npm view</code></p>
<p>é€šè¿‡ <code>npm view -h</code> æˆ‘ä»¬å¯ä»¥å¾—çŸ¥å…¶ç”¨æ³•ï¼š</p>
<blockquote>
<p><code>npm view [&lt;@scope&gt;/]&lt;pkg&gt;[@&lt;version&gt;] [&lt;field&gt;[.subfield]...]</code></p>
<p>aliases: v, info, show</p>
</blockquote>
<p>é€šè¿‡ä»¥ä¸Šå‘½ä»¤æ¥çœ‹çœ‹ <code>unused-npm-names</code> åŒ…ï¼š</p>
<pre><code class="language-bash">npm view unused-npm-names
<span class="hljs-comment"># æˆ–è€…</span>
npm info unused-npm-names</code></pre>
<p>ä¼šè¾“å‡ºï¼š</p>
<pre><code>{ name: 'unused-npm-names',
  'dist-tags': { latest: '1.1.1' },
  versions: [ '1.0.0', '1.0.1', '1.1.0', '1.1.1' ],
  time:
   { created: '2018-09-07T02:53:05.277Z',
     '1.0.0': '2018-09-07T02:53:05.439Z',
     modified: '2018-09-07T03:44:06.363Z',
     '1.0.1': '2018-09-07T03:07:46.542Z',
     '1.1.0': '2018-09-07T03:35:40.221Z',
     '1.1.1': '2018-09-07T03:44:03.534Z' },
  maintainers: [ 'pjy &lt;731401082@qq.com&gt;' ],
  description: 'Find unused npm names',
  homepage: 'https://github.com/PengJiyuan/unused-npm-names#readme',
  keywords: [ 'npm', 'names', 'unused', 'find' ],
  repository:
   { type: 'git',
     url: 'git+https://github.com/PengJiyuan/unused-npm-names.git' },
  author: 'PengJiyuan',
  bugs:
   { url: 'https://github.com/PengJiyuan/unused-npm-names/issues' },
  license: 'MIT',
  readmeFilename: 'README.md',
  version: '1.1.1',
  main: 'index.js',
  bin: { unn: 'cli.js' },
  scripts: { test: 'echo "Error: no test specified" &amp;&amp; exit 1' },
  dependencies: { axios: '^0.18.0', chalk: '^2.4.1', commander: '^2.17.1' },
  gitHead: '818611db1c2baeb589cb3f639559ab6afc9f8e8f',
  dist:
   { integrity: 'sha512-t9bCfY3qbeVY54QC6Cznn3YhM0jq6HX0fE0r5TMAq1IOzu+NQ/caA8tfj62pZtDuZKb9R29ne7UyPB+4zAAplw==',
     shasum: '0b7c162f7656c0d74868bf567713150488f8c473',
     tarball: 'https://registry.npmjs.org/unused-npm-names/-/unused-npm-names-1.1.1.tgz',
     fileCount: 5,
     unpackedSize: 4544,
     'npm-signature': '-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v3.0.4\r\nComment: https://openpgpjs.org\r\n\r\nwsFcBAEBCAAQBQJbkfQDCRA9TVsSAnZWagAAwS4QAKFC1MnosxmJEws07U4O\ngfUPLP04ZLZqtW6nuB/29A72DE1+bh/TGsir83r/sYf1TAPSLOCRd3Nrky3A\n7+umUUOl5zGU5WyG86Fo2XOl5cYgXXWXU6LcZufG/cwM3Xi9MUfxnT7zCEWt\nQPAE8Oh9UhkWCnvFMBA6M6knqK9K08nQf0Ke55UoiuX+OqF8BUlNw8LqEwrI\nMTW8hpjKqsAdo3JhBu0ZkrfTRMq7cTawfjAg+qDs4SSTuWD9OJ9d/2y4OC/p\nX6+3I+Et+SqFJxjGDBounjF1GYYiH3dQPRN8UWL1p9Ypu6YsiZ7l8dp6RH15\nHFUv6lsCmZvhkKc1zO1pY67xUOA9VbLjhXtObwopFvCIehlv3cCw5FMwoa7x\nz+tou0J4II6n68cG6IfTt+9odi9abj7M2YxStW32Miu3efhpXiw2PpX3HWOW\njkY7IQryyxJbQIdKHJqJ59fADHLxpdmr6WADYWt8mKI+9TK9onpSgFgX4udw\ng7fXN3z/L6i7yY+0fvvX/b0jjVzVFNP5kFnUBSnWk/Hjm+h96QS+0xfRCRNv\n5CmVT2kbxYNAdFsFFoNCqHqE+uQoMrSwBw1SIJdybWjs84QrLOrDFjhKypev\nl6bzrgcyE0VWYY1A+zdyquL1cQ+xEJacsfN5NbicxTZhDU0enAtcxhKSe7bz\nJ9CP\r\n=t8xy\r\n-----END PGP SIGNATURE-----\r\n' },
  directories: {} }</code></pre><p>è¿™æ ·çš„è¾“å‡ºå¤ªé•¿äº†ï¼Œæˆ‘ä»¬å¯ä»¥åªçœ‹ <code>unused-npm-names</code> æœ€è¿‘çš„ç‰ˆæœ¬å·:</p>
<pre><code class="language-bash">npm view unused-npm-names version</code></pre>
<p>ä¼šè¾“å‡ºï¼š</p>
<pre><code>1.1.1</code></pre><p>å½“ç„¶ï¼Œå¦‚æœè¿™ä¸ªåŒ…ä¸å­˜åœ¨çš„è¯ï¼Œå°±ä¼šæŠ¥ <code>404</code> çš„é”™è¯¯ï¼Œæˆ‘ä»¬ä¹Ÿå°±çŸ¥é“è¿™ä¸ªåŒ…åæ˜¯å¦è¢«å ç”¨äº†ã€‚</p>
<h2 id="å†™ä¸ªå‘½ä»¤è¡Œå·¥å…·">
      <a href="#å†™ä¸ªå‘½ä»¤è¡Œå·¥å…·" aria-hidden="true"><i class="icon icon-link"></i></a>
      å†™ä¸ªå‘½ä»¤è¡Œå·¥å…·
    </h2>
<p>ä¸Šé¢çš„æ–¹å¼æ˜¯å¯ä»¥å¾—åˆ°æˆ‘ä»¬æƒ³è¦çš„ç»“æœï¼Œå¯æ˜¯å¦‚æœæˆ‘æƒ³ä»ä¸€æ‰¹åå­—ä¸­é€‰ä¸€ä¸ªå¯ç”¨çš„ï¼Œå°±æ²¡æœ‰é‚£ä¹ˆæ–¹ä¾¿äº†ï¼Œå°±è¦ä¸€ä¸ªä¸€ä¸ªè¯•äº†ã€‚</p>
<p>å¦‚æœæœ‰ä¸€ä¸ªå·¥å…·å¯ä»¥åƒè¿™æ ·ä½¿ç”¨ï¼š</p>
<pre><code class="language-bash">unn react react-router react-dom react-pp react-fdasf</code></pre>
<p>èƒ½ä¸€æ­¥é‰´åˆ«æ‰€æœ‰çš„åŒ…ï¼Œé‚£å°±å¤ªæ–¹ä¾¿äº†ã€‚</p>
<p>æ‰€ä»¥ï¼Œæˆ‘ä»¬ä¸€æ­¥ä¸€æ­¥æ¥çœ‹ä¸€ä¸‹åº”è¯¥æ€ä¹ˆå®ç°è¿™ä¸ªåŠŸèƒ½ã€‚</p>
<h3 id="ä¸€ã€çœ‹npmå¦‚ä½•åšçš„">
      <a href="#ä¸€ã€çœ‹npmå¦‚ä½•åšçš„" aria-hidden="true"><i class="icon icon-link"></i></a>
      ä¸€ã€çœ‹npmå¦‚ä½•åšçš„
    </h3>
<p>æˆ‘ä»¬é€šè¿‡ <code>npm view</code> å¯ä»¥æŸ¥çœ‹ä¸€ä¸ªåŒ…çš„ä¿¡æ¯ï¼Œé‚£ä¹ˆåœ¨èµ°è¿™ä¸ªå‘½ä»¤çš„æ—¶å€™ï¼Œnpm è‚¯å®šæ˜¯å‘äº†ä¸€ä¸ªè¯·æ±‚å»æ‹¿åˆ°çš„è¿™ä¸ªåŒ…çš„æ•°æ®ï¼Œé‚£ä¹ˆæˆ‘ä»¬æ€ä¹ˆçŸ¥é“ npm å‘çš„ä»€ä¹ˆè¯·æ±‚å‘¢ï¼Ÿ</p>
<pre><code class="language-bash"><span class="hljs-comment"># åŠ  --verbose åç¼€æ¥çœ‹è¯¦ç»†çš„è¾“å‡º</span>
npm view unused-npm-names --verbose</code></pre>
<p>ä¼šè¾“å‡ºï¼š</p>
<pre><code>...

npm http request GET https://registry.npmjs.org/unused-npm-names

...

npm info ok</code></pre><p>æˆ‘ä»¬åœ¨å…¶ä¸­å‘ç°ï¼Œnpm å‘äº†ä¸ª <code>GET</code> è¯·æ±‚ï¼Œè¯·æ±‚çš„urlæ˜¯ <code>https://registry.npmjs.org/unused-npm-names</code>ã€‚</p>
<p>å“¦ï¼Œé‚£çŸ¥é“äº†ï¼Œæˆ‘ä»¬å¯ä»¥è¯·æ±‚ <code>https://registry.npmjs.org/${packageName}</code> æ¥è·å–åä¸º <code>packageName</code> çš„åŒ…ä¿¡æ¯ã€‚å½“ç„¶ï¼Œåœ¨npmçš„å®˜æ–¹ä»“åº“ä¹Ÿèƒ½æ‰¾åˆ°ç›¸å…³apiçš„ç”¨æ³•ï¼š<a href="https://github.com/npm/registry/blob/master/docs/responses/package-metadata.md">package-metadata</a>ã€‚</p>
<h2 id="å¼€å§‹å†™å·¥å…·">
      <a href="#å¼€å§‹å†™å·¥å…·" aria-hidden="true"><i class="icon icon-link"></i></a>
      å¼€å§‹å†™å·¥å…·
    </h2>
<p>ä¹‹å‰æœ‰ä¸€ç¯‡æ–‡ç« ï¼Œè®²äº†æ€ä¹ˆå†™ä¸€ä¸ªå‘½ä»¤è¡Œå·¥å…·ï¼Œè§è¿™é‡Œï¼š<a href="/blog/2018/how-to-write-cli-tool">æ‰‹æŠŠæ‰‹æ•™ä½ å†™å‘½ä»¤è¡Œå·¥å…·</a>ã€‚è¿™ç¯‡æ–‡ç« å°±ä¸ä»æ€ä¹ˆä»é›¶å¼€å§‹æ„å»ºä¸€ä¸ªå‘½ä»¤è¡Œå·¥å…·å¼€å§‹äº†ï¼Œæˆ‘ä»¬ç›´æ¥æ¥ä»£ç ï¼š</p>
<p>æ–‡ä»¶ç›®å½•å¤§æ¦‚æ˜¯è¿™æ ·ï¼š</p>
<pre><code>unused-npm-names
â”œâ”€â”€ node_modules
â”œâ”€â”€ package.json
â”œâ”€â”€ cli.js (bin)
â””â”€â”€ index.js (main)</code></pre><p><code>package.json</code>:</p>
<pre><code class="language-json">{
  <span class="hljs-attr">"name"</span>: <span class="hljs-string">"unused-npm-names"</span>,
  <span class="hljs-attr">"version"</span>: <span class="hljs-string">"1.0.0"</span>,
  <span class="hljs-attr">"description"</span>: <span class="hljs-string">"Find unused npm names"</span>,
  <span class="hljs-attr">"main"</span>: <span class="hljs-string">"index.js"</span>,
  <span class="hljs-attr">"bin"</span>: {
    <span class="hljs-attr">"unn"</span>: <span class="hljs-string">"cli.js"</span>
  },
  <span class="hljs-attr">"scripts"</span>: {
    <span class="hljs-attr">"test"</span>: <span class="hljs-string">"echo \"Error: no test specified\" &amp;&amp; exit 1"</span>
  },
  <span class="hljs-attr">"license"</span>: <span class="hljs-string">"MIT"</span>,
  <span class="hljs-attr">"dependencies"</span>: {
    <span class="hljs-attr">"axios"</span>: <span class="hljs-string">"^0.18.0"</span>,
    <span class="hljs-attr">"chalk"</span>: <span class="hljs-string">"^2.4.1"</span>,
    <span class="hljs-attr">"commander"</span>: <span class="hljs-string">"^2.17.1"</span>
  }
}</code></pre>
<p>é€šè¿‡ <code>package.json</code> ä¸­è®¾ç½® <code>bin</code> è‡ªåŠ¨ï¼Œæˆ‘ä»¬å°†å‘½ä»¤çš„åå­—è®¾ç½®ä¸º <code>unn</code>ï¼Œæ¯”è¾ƒç®€çŸ­ï¼Œæ–¹ä¾¿å®ç”¨ã€‚</p>
<p>æˆ‘ä»¬æŠŠæŸ¥è¯¢çš„ä¸»é€»è¾‘æ”¾åˆ° <code>index.js</code> ä¸­ï¼ŒæŠŠå‘½ä»¤è¡Œé€»è¾‘æ”¾åˆ° <code>cli.js</code> ä¸­ï¼Œè¿™æ ·çš„è¯æˆ‘ä»¬æ—¢å¯ä»¥é€šè¿‡ cli çš„æ–¹å¼å»ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ <code>require</code> çš„æ–¹å¼åœ¨ nodejs è„šæœ¬ä¸­ä½¿ç”¨ã€‚</p>
<pre><code class="language-js"><span class="hljs-comment">// index.js</span>
<span class="hljs-keyword">const</span> axios = <span class="hljs-built_in">require</span>(<span class="hljs-string">'axios'</span>); <span class="hljs-comment">// ç”¨äºå‘é€ http è¯·æ±‚</span>
<span class="hljs-keyword">const</span> chalk = <span class="hljs-built_in">require</span>(<span class="hljs-string">'chalk'</span>); <span class="hljs-comment">// ç»ˆç«¯è¾“å‡ºå¸¦é¢œè‰²çš„æ–‡æœ¬</span>

<span class="hljs-comment">// searchæ–¹æ³•çš„å‚æ•°æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œå­˜æ”¾ç€éœ€è¦æŸ¥è¯¢çš„åŒ…çš„åå­—</span>
<span class="hljs-comment">// æ¯”å¦‚æˆ‘ä»¬è¦æŸ¥è¯¢ reactå’Œreact-domï¼Œé‚£ä¹ˆsearch(['react', 'react-dom'])</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">search</span>(<span class="hljs-params">pkgs = []</span>) </span>{
  <span class="hljs-keyword">if</span> (!<span class="hljs-built_in">Array</span>.isArray(pkgs)) {
    <span class="hljs-keyword">throw</span> <span class="hljs-string">'Param should be an array.'</span>;
  }

  <span class="hljs-built_in">console</span>.log();
  pkgs.forEach(<span class="hljs-function">(<span class="hljs-params">pkg</span>) =&gt;</span> {
    axios.get(<span class="hljs-string">`https://registry.npmjs.org/<span class="hljs-subst">${pkg}</span>`</span>)
      .then(<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> {
        <span class="hljs-comment">// å¦‚æœè¯·æ±‚æˆåŠŸï¼Œè¯´æ˜åŒ…å­˜åœ¨ï¼Œé‚£ä¹ˆåå­—è¢«å ç”¨ã€‚</span>
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`<span class="hljs-subst">${chalk.cyan(pkg)}</span>: <span class="hljs-subst">${chalk.red(<span class="hljs-string">'Used âŒ'</span>)}</span>`</span>);
      })
      .catch(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {
        <span class="hljs-comment">// å¦‚æœè¯·æ±‚å¤±è´¥ï¼Œå¹¶ä¸”æ˜¯å› ä¸º404æŠ¥é”™ï¼Œé‚£ä¹ˆè¯æ˜åŒ…ä¸å­˜åœ¨ï¼Œåå­—å¯ç”¨ã€‚</span>
        <span class="hljs-keyword">if</span> (err.stack &amp;&amp; <span class="hljs-regexp">/Request failed with status code 404/</span>.test(err.stack)) {
          <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`<span class="hljs-subst">${chalk.cyan(pkg)}</span>: <span class="hljs-subst">${chalk.green(<span class="hljs-string">'Unused âœ…'</span>)}</span>`</span>);
        } <span class="hljs-keyword">else</span> {
          <span class="hljs-comment">// å¤„ç†æœªçŸ¥æƒ…å†µ</span>
          <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`<span class="hljs-subst">${chalk.cyan(pkg)}</span>: <span class="hljs-subst">${chalk.gray(<span class="hljs-string">'Unknown ğŸ¤”'</span>)}</span>`</span>)
        }
      });
  });
}

<span class="hljs-built_in">module</span>.exports = search;</code></pre>
<p>æˆ‘ä»¬æœ€ç»ˆå®ç°çš„cliè¦æ”¯æŒä¸¤ç§æ¨¡å¼ï¼Œä¸€ç§æ˜¯å‘½ä»¤è¡Œå‚æ•°è§£æï¼Œä¸€ç§æ˜¯ä¼ å…¥jsæ–‡ä»¶ã€‚å¦‚ä¸‹ï¼š</p>
<pre><code class="language-js"><span class="hljs-comment">// cli.js</span>
<span class="hljs-meta">#!/usr/bin/env node</span>
<span class="hljs-meta">
'use strict'</span>;

<span class="hljs-keyword">const</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">'path'</span>);
<span class="hljs-keyword">const</span> program = <span class="hljs-built_in">require</span>(<span class="hljs-string">'commander'</span>); <span class="hljs-comment">// å‘½ä»¤è¡Œå‚æ•°è§£æ</span>
<span class="hljs-keyword">const</span> chalk = <span class="hljs-built_in">require</span>(<span class="hljs-string">'chalk'</span>);
<span class="hljs-keyword">const</span> search = <span class="hljs-built_in">require</span>(<span class="hljs-string">'.'</span>);
<span class="hljs-keyword">const</span> pkg = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./package.json'</span>);

program
  .version(pkg.version, <span class="hljs-string">'-v, --version'</span>)
  .usage(<span class="hljs-string">'[names])'</span>)
  .option(<span class="hljs-string">'-c, --config [config]'</span>, <span class="hljs-string">'use config files'</span>)
  .on(<span class="hljs-string">'--help'</span>, () =&gt; {
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'\n  Examples:\n'</span>);
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`    <span class="hljs-subst">${chalk.green(<span class="hljs-string">'$'</span>)}</span> unn react,react-dom,react-router`</span>);
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">''</span>);
  })
  .parse(process.argv);

<span class="hljs-comment">// program.argsæ˜¯æ‰€æœ‰è§£æç›´æ¥ä¼ å…¥çš„å‚æ•°</span>
<span class="hljs-comment">// æ¯”å¦‚ unn react react-dom --hehe</span>
<span class="hljs-comment">// é‚£ä¹ˆprogram.argsæ˜¯['react', 'react-dom']</span>
<span class="hljs-keyword">let</span> pkgs = program.args;

<span class="hljs-comment">// å¦‚æœæŒ‡å®šjsæ–‡ä»¶çš„è¯ï¼Œpkgsä»æ–‡ä»¶ä¸­è¯»å–</span>
<span class="hljs-keyword">if</span> (program.config &amp;&amp; <span class="hljs-keyword">typeof</span> program.config === <span class="hljs-string">'string'</span>) {
  <span class="hljs-comment">// process.cwd() æ˜¯å½“å‰ç¨‹åºè¿è¡Œçš„ç›®å½•</span>
  <span class="hljs-keyword">const</span> files = path.resolve(process.cwd(), program.config);

  <span class="hljs-keyword">try</span> {
    pkgs = <span class="hljs-built_in">require</span>(files);
    search(pkgs);
  } <span class="hljs-keyword">catch</span> (err) {
    <span class="hljs-built_in">console</span>.log(err);
    process.exit(<span class="hljs-number">1</span>);
  }
} <span class="hljs-keyword">else</span> {
  <span class="hljs-keyword">if</span> (pkgs.length &gt; <span class="hljs-number">0</span>) {
    search(pkgs);
  } <span class="hljs-keyword">else</span> {
    program.outputHelp();
  }
}</code></pre>
<p>è¿™æ ·æˆ‘ä»¬çš„å·¥å…·å°±åˆ›å»ºå¥½äº†ï¼Œæˆ‘ä»¬ä¸€èµ·æ¥è¯•ä¸€ä¸‹å§ã€‚ï¼ˆæ³¨æ„ï¼šè¦å…ˆ <code>npm link</code> æˆ–è€… å…¨å±€å®‰è£…äº†æˆ‘ä»¬å†™çš„è¿™ä¸ªåŒ…ï¼Œä¸æ˜ç™½çš„å¯ä»¥å…ˆçœ‹ä¸Šä¸€ç¯‡æ•™ç¨‹ï¼‰</p>
<p><strong>cliä½¿ç”¨</strong></p>
<pre><code class="language-bash">unn react react-dom unnnn

<span class="hljs-comment"># è¾“å‡º</span>
unnnn: Unused âœ…
react-dom: Used âŒ
react: Used âŒ</code></pre>
<p><strong>é…ç½®æ–‡ä»¶ä½¿ç”¨</strong></p>
<pre><code class="language-js"><span class="hljs-comment">// names.js</span>
<span class="hljs-built_in">module</span>.exports = [<span class="hljs-string">'react'</span>, <span class="hljs-string">'react-router'</span>, <span class="hljs-string">'react-dom'</span>, <span class="hljs-string">'hahahahahaha'</span>];</code></pre>
<pre><code class="language-bash">unn -c names.js

<span class="hljs-comment"># è¾“å‡º</span>
hahahahahaha: Unused âœ…
react-dom: Used âŒ
react: Used âŒ
react-router: Used âŒ</code></pre>
<p><strong>NodeJs apiä½¿ç”¨</strong></p>
<pre><code class="language-js"><span class="hljs-comment">// search.js</span>
<span class="hljs-keyword">const</span> search = <span class="hljs-built_in">require</span>(<span class="hljs-string">'unused-npm-names'</span>);

search([<span class="hljs-string">'react'</span>, <span class="hljs-string">'react-dom'</span>, <span class="hljs-string">'react-router'</span>, <span class="hljs-string">'unused-npm-names'</span>]);</code></pre>
<pre><code class="language-bash">node search.js

<span class="hljs-comment"># è¾“å‡º</span>
unused-npm-names: Used âŒ
react-router: Used âŒ
react: Used âŒ
react-dom: Used âŒ</code></pre>
<p><strong>æœ¬ç« å®Œ</strong></p>

        
          <div style="margin-top: 80px;" id="disqus_thread"></div>
          <script>
            var disqus_config = function () {
            this.page.url = '';  // Replace PAGE_URL with your page's canonical URL variable
            this.page.identifier = ''; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
            };
            (function() { // DON'T EDIT BELOW THIS LINE
            var d = document, s = d.createElement('script');
            s.src = 'https://pengjiyuan-blog.disqus.com/embed.js';
            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
            })();
          </script>
          <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        
      </div>
      <footer class="copyright">
        <span><b><a href="/">PengJiyuan</a></b> All rights reserved. Powerd by <a style="color: #f59200" href="https://github.com/PengJiyuan/bloger" target="_blank">Bloger</a>.</span>
      </footer>
    </div>
    <script src="https://unpkg.com/particle-bg/lib/particle-bg.umd.min.js"></script>
    <script>
      particleBg('#header', {
        count: 30,
        color: '#fff'
      });
    </script>
  </body>
</html>
